apiVersion: langop.io/v1alpha1
kind: LanguageTool
metadata:
  name: k8s
  labels:
    langop.io/source: catalog
  annotations:
    langop.io/display-name: "Kubernetes"
    langop.io/aliases: "kubectl,kubernetes"
spec:
  description: Native Kubernetes operations - manage resources, pods, logs, and CRDs
  image: ghcr.io/language-operator/k8s-tool:latest
  deploymentMode: service
  port: 80
  type: mcp

  # Network egress configuration
  egress:
    - description: Allow access to Kubernetes API server
      to:
        dns:
          - "kubernetes.default.svc.cluster.local"
      ports:
        - port: 443
          protocol: TCP

# RBAC Configuration (managed by operator, documented here for reference)
# The operator will create a ServiceAccount and ClusterRole with the following permissions:
#
# clusterRole:
#   rules:
#     # Allow reading all resources
#     - apiGroups: ["*"]
#       resources: ["*"]
#       verbs: ["get", "list", "watch"]
#     # Allow managing common resources
#     - apiGroups: [""]
#       resources: ["pods", "services", "configmaps", "secrets"]
#       verbs: ["create", "update", "patch", "delete"]
#     - apiGroups: ["apps"]
#       resources: ["deployments", "statefulsets", "daemonsets"]
#       verbs: ["create", "update", "patch", "delete"]
#     # Allow pod exec and logs
#     - apiGroups: [""]
#       resources: ["pods/log", "pods/exec"]
#       verbs: ["get", "create"]
